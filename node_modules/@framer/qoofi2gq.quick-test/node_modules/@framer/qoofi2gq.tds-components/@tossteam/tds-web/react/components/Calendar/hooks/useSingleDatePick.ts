import { isSameDay } from 'date-fns';
import { useCallback } from 'react';

const noop = () => {};

export default function useSingleDatePick(
  selectedDate: Date | undefined,
  onDateChange: (date: Date | undefined) => void = noop
): [Date | undefined, (date: Date) => void] {
  const handleDayClick = useCallback(
    (date: Date) => {
      let nextSelectedDate: Date | undefined = date;

      if (selectedDate !== undefined && isSameDay(selectedDate, date)) {
        nextSelectedDate = undefined;
      }
      onDateChange(nextSelectedDate);
    },
    [selectedDate, onDateChange]
  );

  return [selectedDate, handleDayClick];
}
