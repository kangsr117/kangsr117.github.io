import { action } from '@storybook/addon-actions';
import { storiesOf } from '@storybook/react';
import _ from 'lodash';
import * as React from 'react';

import { Checkbox } from 'src/react';

import Readme from '../README.md';

storiesOf('Checkbox', module)
  .addParameters({ readme: { sidebar: Readme } })
  .add('ðŸ““example - full', () => {
    function CheckboxFullExample() {
      const [checkedList, setCheckedList] = React.useState([false, false, false, false]);

      function onChange(index: number, event: React.ChangeEvent<HTMLInputElement>) {
        const nextCheckedList = checkedList.slice();
        nextCheckedList.splice(index, 1, event.target.checked);
        setCheckedList(nextCheckedList);
        action('onChange - Checkbox')(event);
      }

      return (
        <>
          {checkedList.map((checked, index) => (
            <Checkbox
              checked={checked}
              onChange={_.partial(onChange, index)}
              key={`checkbox-${index}`}
            >
              checked = {Boolean(checked).toString()}
            </Checkbox>
          ))}
        </>
      );
    }

    return <CheckboxFullExample />;
  });
