import { addPropertyControls, ControlType } from 'framer';
import * as React from 'react';
import {
  Props as TDSTextButtonProps,
  TextButton as TDSTextButton,
} from '../@tossteam/tds-web/react/components/TextButton/TextButton';
import { TDSComponent } from '../src/components/TDSComponent';
import { useFilteringEventHandlersInInspector } from '../src/hooks/useFilteringEventHandlersInInspector';
import '../src/styles/tds-framer.css';
import { makeComponentDisplayName } from '../src/utils/makeDisplayName';

const shapeLabels = ['í™”ì‚´í‘œ', 'í…ìŠ¤íŠ¸ë§Œ', 'ë°‘ì¤„'] as const;
const typeLabels = ['ğŸ”µ ë¸”ë£¨', 'âšªï¸ ê·¸ë ˆì´'] as const;
const disabledLabels = ['ì•„ë‹ˆì˜¤', 'ë„¤'] as const;

type ShapeLabel = typeof shapeLabels[number];
type TypeLabel = typeof typeLabels[number];
type DisabledLabel = typeof disabledLabels[number];

interface Props {
  shape: ShapeLabel;
  text: string;
  type: TypeLabel;
  disabled: DisabledLabel;

  onClick?: () => void;
}

const typeByControlLabel: { [key in TypeLabel]: TDSTextButtonProps['type'] } = {
  'ğŸ”µ ë¸”ë£¨': 'primary',
  'âšªï¸ ê·¸ë ˆì´': 'grey',
};

const disabledByControlLabel: {
  [key in DisabledLabel]: TDSTextButtonProps['disabled'];
} = {
  ì•„ë‹ˆì˜¤: false,
  ë„¤: true,
};

export function TextButton(props: Props) {
  const { shape, text, type, disabled, onClick } = useFilteringEventHandlersInInspector(props);

  return (
    <TDSComponent
      name="TextButton"
      summary={{
        type: shape === 'ë°‘ì¤„' ? 'underline' : typeByControlLabel[type],
        disabled: disabledByControlLabel[disabled],
        arrow: shape === 'í™”ì‚´í‘œ',
        text,
      }}
    >
      <TDSTextButton
        type={shape === 'ë°‘ì¤„' ? 'underline' : typeByControlLabel[type]}
        disabled={disabledByControlLabel[disabled]}
        withArrow={shape === 'í™”ì‚´í‘œ'}
        onClick={onClick}
      >
        {text}
      </TDSTextButton>
    </TDSComponent>
  );
}

addPropertyControls(TextButton, {
  shape: {
    title: 'í˜•íƒœ',
    type: ControlType.Enum,
    displaySegmentedControl: true,
    options: shapeLabels as any,
    defaultValue: 'í™”ì‚´í‘œ',
  },
  text: {
    title: 'í…ìŠ¤íŠ¸',
    type: ControlType.String,
    defaultValue: 'ë²„íŠ¼ë ˆì´ë¸”',
  },
  type: {
    title: 'ìƒ‰ìƒ',
    type: ControlType.Enum,
    displaySegmentedControl: true,
    options: typeLabels as any,
    defaultValue: 'ë¸”ë£¨',
    hidden(props) {
      return props.shape === 'ë°‘ì¤„';
    },
  },
  disabled: {
    title: 'ë¹„í™œì„±',
    type: ControlType.Enum,
    displaySegmentedControl: true,
    options: disabledLabels as any,
    defaultValue: 'ì•„ë‹ˆì˜¤',
  },
  onClick: {
    type: ControlType.EventHandler,
  },
});

(TextButton as any).defaultProps = {
  width: 98,
  height: 33,
};

TextButton.displayName = makeComponentDisplayName('TextButton', 'í…ìŠ¤íŠ¸ë²„íŠ¼');
