import { button } from '@storybook/addon-knobs';
import { storiesOf } from '@storybook/react';
import * as React from 'react';

import Carousel from 'src/react/Carousel';

import Readme from '../README.md';
import SimpleSlide from './SimpleSlide';

function AutoplayExample() {
  const ref: React.RefObject<Carousel> = React.useRef(null);

  const startAutoplay = () => {
    ref.current!.startAutoplay();
  };

  const stopAutoplay = () => {
    ref.current!.stopAutoplay();
  };

  return (
    <>
      <Carousel ref={ref} spaceBetween={16} autoplay={{ delay: 1000 }}>
        {[1, 2, 3, 4, 5].map(index => (
          <Carousel.Slide key={index}>
            <SimpleSlide>Slide {index}</SimpleSlide>
          </Carousel.Slide>
        ))}
      </Carousel>
      {button('Start', startAutoplay)}
      {button('Stop', stopAutoplay)}
    </>
  );
}

storiesOf('Carousel', module)
  .addParameters({
    readme: {
      sidebar: Readme,
    },
  })
  .add('ðŸŽ¬autoplay', () => {
    return <AutoplayExample />;
  });
