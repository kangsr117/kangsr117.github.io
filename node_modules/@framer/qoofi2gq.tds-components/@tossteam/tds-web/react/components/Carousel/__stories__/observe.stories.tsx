import { storiesOf } from "@storybook/react";
import * as React from "react";
import { createElement, useCallback, useState } from "react";
import Carousel from "src/react/Carousel";
import Readme from "../README.md";
import SimpleSlide from "./SimpleSlide";

storiesOf("Carousel", module)
  .addParameters({ readme: { sidebar: Readme } })
  .add("observe", () =>
    createElement(() => {
      const [display, setDisplay] = useState("none");
      const show = useCallback(() => {
        setDisplay("block");
      }, []);

      const hide = useCallback(() => {
        setDisplay("none");
      }, []);

      return (
        <>
          <div>
            <button onClick={show}>Show</button>
            <button onClick={hide}>Hide</button>
          </div>
          <div style={{ display }}>
            <Carousel
              centeredSlides={true}
              paginationPosition="bottom"
              slidesPerView={1.3}
              spaceBetween={16}
              loop={true}
              observer={true}
              observeParents={true}
            >
              {[1, 2, 3, 4, 5].map((index) => (
                <Carousel.Slide key={index}>
                  <SimpleSlide />
                </Carousel.Slide>
              ))}
            </Carousel>
          </div>
        </>
      );
    })
  );
