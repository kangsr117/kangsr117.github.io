import { action } from "@storybook/addon-actions";
import { storiesOf } from "@storybook/react";
import * as React from "react";
import { useState } from "react";
import { TextField } from "src/react";
import Readme from "../README.md";

storiesOf("TextField", module)
  .addParameters({ readme: { sidebar: Readme } })
  .add("String controlled component", () => {
    function TextFieldControlledStringExample() {
      const [value, setValue] = useState<string>("");

      function onChangeTextField(event: React.ChangeEvent<HTMLInputElement>) {
        setValue(event.target.value);
        action("onChange - TextField")(...arguments);
      }

      return (
        <TextField
          value={value}
          onChange={onChangeTextField}
          placeholder="hello world"
        />
      );
    }

    return <TextFieldControlledStringExample />;
  })
  .add("Number controlled component", () => {
    function TextFieldControlledNumberExample() {
      const [value, setValue] = useState<number>(0);

      function onChangeTextField(event: React.ChangeEvent<HTMLInputElement>) {
        setValue(parseInt(event.target.value, 10) || 0);
        action("onChange - TextField")(...arguments);
      }

      return <TextField value={value} onChange={onChangeTextField} />;
    }

    return <TextFieldControlledNumberExample />;
  });
