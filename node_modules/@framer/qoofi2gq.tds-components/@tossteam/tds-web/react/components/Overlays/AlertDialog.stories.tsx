import { action } from "@storybook/addon-actions";
import { storiesOf } from "@storybook/react";
import * as React from "react";
import { useState } from "react";
import { useDialog } from "src/react/providers/DialogContext";
import { Button } from "../Button";
import AlertDialog from "./AlertDialog";

function OverviewExample() {
  const [openedDialog, setOpenedDialog] = useState<string | undefined>(
    undefined
  );

  return (
    <>
      <Button
        onClick={() => {
          setOpenedDialog("titleOnly");
        }}
      >
        Title만 있는 다이얼로그
      </Button>
      <AlertDialog
        open={openedDialog === "titleOnly"}
        title={"로그인 정보와 입력하신\n인증정보가 다릅니다"}
        buttonText="확인"
        onClose={() => {
          setOpenedDialog(undefined);
        }}
        onButtonClick={action("onButtonClick")}
      />
      <Button
        htmlStyle={{
          marginTop: "24px",
        }}
        onClick={() => {
          setOpenedDialog("withDescription");
        }}
      >
        Description 포함
      </Button>
      <AlertDialog
        open={openedDialog === "withDescription"}
        title={"김토스님의 의견이\n잘 전달되었습니다"}
        description={`소중한 의견을 바탕으로 더 간편한\n서비스를 만들겠습니다.`}
        buttonText="확인"
        onClose={() => {
          setOpenedDialog(undefined);
        }}
        onButtonClick={action("onButtonClick")}
      />
    </>
  );
}

function UseDialogExample() {
  const { openAlert } = useDialog();

  return (
    <Button
      onClick={async () => {
        await openAlert({
          title: "로그인 정보와 입력하신\n인증정보가 다릅니다",
          buttonText: "확인",
        });
      }}
    >
      다이얼로그 열기
    </Button>
  );
}

storiesOf("AlertDialog", module)
  .addDecorator((storyFn) => {
    return <div style={{ padding: "24px" }}>{storyFn()}</div>;
  })
  .add("Overview", () => {
    return <OverviewExample />;
  })
  .add("useDialog", () => {
    return <UseDialogExample />;
  });
