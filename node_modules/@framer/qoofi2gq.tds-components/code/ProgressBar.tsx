import { addPropertyControls, ControlType } from 'framer';
import * as React from 'react';
import { colors } from '../@tossteam/colors';
import {
  default as TDSProgressBar,
  Props as TDSProgressBarProps,
} from '../@tossteam/tds-web/react/components/ProgressBar/ProgressBar';
import { TDSComponent } from '../src/components/TDSComponent';
import '../src/styles/tds-framer.css';
import { makeComponentDisplayName } from '../src/utils/makeDisplayName';

const sizeLabels = ['얇음', '보통', '굵음'] as const;
const colorLabels = ['🔵 블루', '🔴 레드', '🟢 그린', '🌑 그레이'] as const;

type SizeLabel = typeof sizeLabels[number];
type ColorLabel = typeof colorLabels[number];

interface Props {
  size: SizeLabel;
  color: ColorLabel;
  progress: number;
}

const sizeByControlLabel: {
  [key in SizeLabel]: TDSProgressBarProps['size'];
} = {
  얇음: 'light',
  보통: 'normal',
  굵음: 'bold',
};

const colorByControlLabel: {
  [key in ColorLabel]: TDSProgressBarProps['color'];
} = {
  '🔵 블루': colors.blue500,
  '🔴 레드': colors.red500,
  '🟢 그린': colors.green400,
  '🌑 그레이': colors.grey600,
};

export function ProgressBar({ size, color, progress }: Props) {
  return (
    <TDSComponent
      name="ProgressBar"
      summary={{
        size: sizeByControlLabel[size],
        color: colorByControlLabel[color],
        progress: `${progress}%`,
      }}
    >
      <TDSProgressBar
        size={sizeByControlLabel[size]}
        color={colorByControlLabel[color]}
        progress={progress / 100}
        animate={true}
      />
    </TDSComponent>
  );
}

addPropertyControls(ProgressBar, {
  size: {
    title: '크기',
    type: ControlType.Enum,
    displaySegmentedControl: true,
    options: sizeLabels as any,
    defaultValue: sizeLabels[1],
  },
  color: {
    title: '색상',
    type: ControlType.Enum,
    options: colorLabels as any,
    defaultValue: colorLabels[0],
  },
  progress: {
    title: '프로그레스',
    type: ControlType.Number,
    min: 0,
    max: 100,
    defaultValue: 50,
  },
});

(ProgressBar as any).defaultProps = {
  width: 327,
  height: 5,
};

ProgressBar.displayName = makeComponentDisplayName('ProgressBar', '프로그레스바');
