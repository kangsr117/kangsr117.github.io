import { TextAlignProperty } from 'csstype';
import { addPropertyControls, ControlType } from 'framer';
import * as React from 'react';
import { FontWeightValue, Text as TDSText, TypographyValue } from '../@tossteam/tds-web/react/components/Text/Text';
import { commaizeNumber } from '../@tossteam/tds-web/react/utils/commaize';
import { TDSComponent } from '../src/components/TDSComponent';
import { useFilteringEventHandlersInInspector } from '../src/hooks/useFilteringEventHandlersInInspector';
import '../src/styles/tds-framer.css';
import { makeComponentDisplayName } from '../src/utils/makeDisplayName';
import { colors as canvasColors } from './canvas';

const typeLabels = ['ì¼ë°˜ í…ìŠ¤íŠ¸', 'â‚©'] as const;
const sizeLabels = [
  'ì•ˆ ì½ì–´ë„ ë¨ã€€ã€€13 ãƒ» t7',
  'ì‘ì€ ë³¸ë¬¸ã€€ã€€ã€€ 15 ãƒ» t6',
  'ì¼ë°˜ ë³¸ë¬¸ã€€ã€€ã€€ 17 ãƒ» t5 ',
  'ì¡°ê¸ˆ í° ë³¸ë¬¸ã€€ã€€19 ãƒ» st8',
  'â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”',
  'ì‘ì€ ì œëª©ã€€ã€€ã€€ 20 ãƒ» t4',
  'ì¼ë°˜ ì œëª©ã€€ã€€ã€€ 22 ãƒ» t3',
  'ì¡°ê¸ˆ í° ì œëª©ã€€ã€€24 ãƒ» st5',
  'í° ì œëª©ã€€ã€€ã€€ã€€ 26 ãƒ» t2',
  'ë§¤ìš° í° ì œëª©ã€€ã€€30 ãƒ» t1',
] as const;
const styleLabels = ['Regular', 'Medium', 'SemiB', 'Bold'] as const;
const priceInputTypeLabels = ['ìŠ¬ë¼ì´ë”', 'ì§ì ‘ì…ë ¥'] as const;
const textAlignLabels = ['ì™¼ìª½', 'ì¤‘ì•™', 'ì˜¤ë¥¸ìª½'] as const;

type TypeLabel = typeof typeLabels[number];
type SizeLabel = typeof sizeLabels[number];
type StyleLabel = typeof styleLabels[number];
type PriceInputTypeLabel = typeof priceInputTypeLabels[number];
type TextAlignLabel = typeof textAlignLabels[number];

const typographyBySizeLabel: { [key in SizeLabel]: TypographyValue } = {
  'ì•ˆ ì½ì–´ë„ ë¨ã€€ã€€13 ãƒ» t7': 't7',
  'ì‘ì€ ë³¸ë¬¸ã€€ã€€ã€€ 15 ãƒ» t6': 't6',
  'ì¼ë°˜ ë³¸ë¬¸ã€€ã€€ã€€ 17 ãƒ» t5 ': 't5',
  'ì¡°ê¸ˆ í° ë³¸ë¬¸ã€€ã€€19 ãƒ» st8': 'st8',
  'â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”': 't4',
  'ì‘ì€ ì œëª©ã€€ã€€ã€€ 20 ãƒ» t4': 't4',
  'ì¼ë°˜ ì œëª©ã€€ã€€ã€€ 22 ãƒ» t3': 't3',
  'ì¡°ê¸ˆ í° ì œëª©ã€€ã€€24 ãƒ» st5': 'st5',
  'í° ì œëª©ã€€ã€€ã€€ã€€ 26 ãƒ» t2': 't2',
  'ë§¤ìš° í° ì œëª©ã€€ã€€30 ãƒ» t1': 't1',
};

const typographyNameBySizeLabel: { [key in SizeLabel]: string } = {
  'ì•ˆ ì½ì–´ë„ ë¨ã€€ã€€13 ãƒ» t7': 'Typography7',
  'ì‘ì€ ë³¸ë¬¸ã€€ã€€ã€€ 15 ãƒ» t6': 'Typography6',
  'ì¼ë°˜ ë³¸ë¬¸ã€€ã€€ã€€ 17 ãƒ» t5 ': 'Typography5',
  'ì¡°ê¸ˆ í° ë³¸ë¬¸ã€€ã€€19 ãƒ» st8': 'sub Typography8',
  'â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”': 't4',
  'ì‘ì€ ì œëª©ã€€ã€€ã€€ 20 ãƒ» t4': 'Typography4',
  'ì¼ë°˜ ì œëª©ã€€ã€€ã€€ 22 ãƒ» t3': 'Typography3',
  'ì¡°ê¸ˆ í° ì œëª©ã€€ã€€24 ãƒ» st5': 'sub Typography5',
  'í° ì œëª©ã€€ã€€ã€€ã€€ 26 ãƒ» t2': 'Typography2',
  'ë§¤ìš° í° ì œëª©ã€€ã€€30 ãƒ» t1': 'Typography1',
};

const styleByLabel: { [key in StyleLabel]: FontWeightValue } = {
  Regular: 'regular',
  Medium: 'medium',
  SemiB: 'semibold',
  Bold: 'bold',
};

const textAlignByLabel: { [key in TextAlignLabel]: TextAlignProperty } = {
  ì™¼ìª½: 'left',
  ì¤‘ì•™: 'center',
  ì˜¤ë¥¸ìª½: 'right',
};

interface Props {
  fixedWidth: boolean;
  type: TypeLabel;
  style: StyleLabel;
  size: SizeLabel;
  text: string;
  priceInputType: PriceInputTypeLabel;
  sliderPrice: number;
  customPrice: string;
  color: string;
  textAlign: TextAlignLabel;

  onClick?: () => void;
}

export function Text(props: Props) {
  const {
    fixedWidth,
    type,
    style,
    size,
    text,
    priceInputType,
    sliderPrice,
    customPrice,
    color,
    textAlign,
    onClick,
  } = useFilteringEventHandlersInInspector(props);

  return (
    <TDSComponent
      name="Text"
      summary={{
        typography: typographyNameBySizeLabel[size],
        fontWeight: styleByLabel[style],
        color,
        textAlign: textAlignByLabel[textAlign],
      }}
    >
      <TDSText
        typography={typographyBySizeLabel[size]}
        fontWeight={styleByLabel[style]}
        color={color}
        stringToJSX
        style={{
          width: fixedWidth ? '100%' : undefined,
          textAlign: textAlignByLabel[textAlign],
        }}
        onClick={onClick}
      >
        {type === 'ì¼ë°˜ í…ìŠ¤íŠ¸'
          ? text
          : `${commaizeNumber(priceInputType === 'ìŠ¬ë¼ì´ë”' ? sliderPrice : customPrice)} ì›`}
      </TDSText>
    </TDSComponent>
  );
}

addPropertyControls(Text, {
  fixedWidth: {
    title: 'ë„ˆë¹„',
    type: ControlType.Boolean,
    enabledTitle: 'Fixed',
    disabledTitle: 'Auto',
    defaultValue: true,
  },
  type: {
    title: 'ì¢…ë¥˜',
    type: ControlType.Enum,
    displaySegmentedControl: true,
    options: typeLabels as any,
    defaultValue: typeLabels[0],
  },
  style: {
    title: 'ìŠ¤íƒ€ì¼',
    type: ControlType.Enum,
    displaySegmentedControl: true,
    options: styleLabels as any,
    defaultValue: styleLabels[0],
  },
  size: {
    title: 'í¬ê¸°',
    type: ControlType.Enum,
    options: sizeLabels as any,
    defaultValue: sizeLabels[2],
  },
  text: {
    title: 'í…ìŠ¤íŠ¸',
    type: ControlType.String,
    defaultValue: 'í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”',
    displayTextArea: true,
    hidden(props) {
      return props.type !== 'ì¼ë°˜ í…ìŠ¤íŠ¸';
    },
  },
  priceInputType: {
    title: 'ğŸ’° ê¸ˆì•¡',
    type: ControlType.Enum,
    displaySegmentedControl: true,
    options: priceInputTypeLabels as any,
    defaultValue: priceInputTypeLabels[0],
    hidden(props) {
      return props.type !== 'â‚©';
    },
  },
  sliderPrice: {
    title: 'â†³ ê¸ˆì•¡ ì¡°ì ˆ',
    type: ControlType.Number,
    min: 0,
    max: 3000000,
    defaultValue: 30000,
    hidden(props) {
      return props.type !== 'â‚©' || props.priceInputType !== 'ìŠ¬ë¼ì´ë”';
    },
  },
  customPrice: {
    title: 'â†³ ì§ì ‘ ì…ë ¥',
    type: ControlType.String,
    defaultValue: '30000',
    hidden(props) {
      return props.type !== 'â‚©' || props.priceInputType !== 'ì§ì ‘ì…ë ¥';
    },
  },
  color: {
    title: 'ì»¬ëŸ¬',
    type: ControlType.Color,
    defaultValue: canvasColors['Grey700 - ì¼ë°˜ì ì¸ í…ìŠ¤íŠ¸'],
  },
  textAlign: {
    title: 'ì •ë ¬',
    type: ControlType.Enum,
    displaySegmentedControl: true,
    options: textAlignLabels as any,
    defaultValue: textAlignLabels[0],
  },
  onClick: {
    type: ControlType.EventHandler,
  },
});

(Text as any).defaultProps = {
  width: 175,
  height: 25,
};

Text.displayName = makeComponentDisplayName('Text', 'í…ìŠ¤íŠ¸');
